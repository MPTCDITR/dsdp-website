---
import { getLatestPosts, getRemainingBlogPosts } from "@/lib/blog";

import { BlogList } from "@/components/pages/newsAndEvents/BlogList";
import LatestBlogList from "@/components/pages/newsAndEvents/LatestBlogList.astro";

import { languages, ui } from "@/i18n/ui";
import { getLangFromUrl } from "@/i18n/utils";
import Layout from "@/layouts/layout.astro";

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({
    params: { lang },
  }));
}

const lang = getLangFromUrl(Astro.url);
const translations = ui[lang];
const latestPosts = await getLatestPosts(lang);
const remainingPosts = await getRemainingBlogPosts(lang);
---

<Layout title={`អត្ថបទព័ត៌មាន និង ព្រឹត្តិការណ៍ - News and Events`}>
  <!-- Section 1 -->
  <LatestBlogList translations={translations} posts={latestPosts} lang={lang} />
  <!-- Section 2 -->
  <BlogList
    translations={translations}
    posts={remainingPosts}
    lang={lang}
    client:load
  />
</Layout>
