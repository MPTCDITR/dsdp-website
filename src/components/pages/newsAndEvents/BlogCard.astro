---
import { formatDate } from "@/lib/utils";

import { Card } from "@/components/ui/card";
import { LinkButton } from "@/components/ui/link-button";

import type { Language } from "@/i18n/ui";
import { useTranslations } from "@/i18n/utils";
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
  index: number;
  title: string;
  description: string;
  date: string;
  image: ImageMetadata;
  slug: string;
  lang: Language;
}

const { index, title, description, date, image, slug, lang } = Astro.props;

const urlSlug = slug.split("/").slice(1).join("/");
const t = useTranslations(lang);
---

<Card
  className="overflow-hidden transition-all duration-300 ease-in-out hover:-translate-y-1 shadow-none hover:shadow-md"
>
  <article
    class={`grid md:grid-cols-5 grid-cols-1 gap-6 p-3 h-auto duration-300 rounded-lg${
      index % 2 === 1 ? " md:flex-row-reverse" : ""
    }`}
  >
    <figure
      class="md:col-span-2 aspect-auto relative rounded-lg overflow-hidden"
    >
      <Image src={image} alt={title} class="w-full h-full object-cover" />
    </figure>
    <section class="space-y-3 md:col-span-3">
      <p class="font-bold text-secondary hover:underline">
        <time datetime={date}>{formatDate(date, lang)}</time>
      </p>
      <h2 class="text-2xl font-bold text-primary line-clamp-2 leading-normal">
        {title}
      </h2>
      <p class="text-gray-600 line-clamp-2">{description}</p>
      <LinkButton
        href={`/${lang}/media-hub/news-and-events/${urlSlug}`}
        variant="outline"
        className="bg-primary text-white hover:bg-secondary w-fit px-4 py-2 rounded-md"
      >
        {t("newsAndEvents.readmore")}
      </LinkButton>
    </section>
  </article>
</Card>
